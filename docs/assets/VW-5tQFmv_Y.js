import"./modulepreload-polyfill-B5Qt9EMX.js";const v=document.getElementById("initiate-game-button"),n=document.getElementById("game-canvas"),u=document.querySelector(".game-intro-screen"),f=document.querySelector(".checkpoint-message-screen"),m=document.querySelector(".checkpoint-message-screen > p"),h=n.getContext("2d");n.width=innerWidth;n.height=innerHeight;const r=.5;let c=!0;const o=i=>innerHeight<500?Math.ceil(i/500*innerHeight):i;class E{constructor(){this.position={x:o(10),y:o(400)},this.velocity={x:0,y:0},this.width=o(40),this.height=o(40)}draw(){h.fillStyle="#99c9ff",h.fillRect(this.position.x,this.position.y,this.width,this.height)}update(){this.draw(),this.position.x+=this.velocity.x,this.position.y+=this.velocity.y,this.position.y+this.height+this.velocity.y<=n.height?(this.position.y<0&&(this.position.y=0,this.velocity.y=r),this.velocity.y+=r):this.velocity.y=0,this.position.x<this.width&&(this.position.x=this.width),this.position.x>=n.width-this.width*2&&(this.position.x=n.width-this.width*2)}}class k{constructor(s,e){this.position={x:s,y:e},this.width=o(40),this.height=o(40),this.color="red",this.speed=.8}draw(){h.fillStyle=this.color,h.fillRect(this.position.x,this.position.y,this.width,this.height)}update(s,e){const l=s-this.position.x,w=e-this.position.y,a=Math.hypot(l,w);a>1&&(this.position.x+=l/a*this.speed,this.position.y+=w/a*this.speed),this.draw()}}class S{constructor(s,e){this.position={x:s,y:e},this.width=200,this.height=o(40)}draw(){h.fillStyle="#acd157",h.fillRect(this.position.x,this.position.y,this.width,this.height)}}class b{constructor(s,e,l){this.position={x:s,y:e},this.width=o(40),this.height=o(70),this.claimed=!1}draw(){h.fillStyle="#f1be32",h.fillRect(this.position.x,this.position.y,this.width,this.height)}claim(){this.width=0,this.height=0,this.position.y=1/0,this.claimed=!0}}const t=new E,A=new k(1e3,o(300)),C=[{x:500,y:o(450)},{x:700,y:o(400)},{x:850,y:o(350)},{x:900,y:o(350)},{x:1050,y:o(150)},{x:2500,y:o(450)},{x:2900,y:o(400)},{x:3150,y:o(350)},{x:3900,y:o(450)},{x:4200,y:o(400)},{x:4400,y:o(200)},{x:4700,y:o(150)}],p=C.map(i=>new S(i.x,i.y)),R=[{x:1170,y:o(80),z:1},{x:2900,y:o(330),z:2},{x:4800,y:o(80),z:3}],d=R.map(i=>new b(i.x,i.y,i.z)),g=()=>{requestAnimationFrame(g),h.clearRect(0,0,n.width,n.height),p.forEach(i=>i.draw()),d.forEach(i=>i.draw()),t.update(),A.update(t.position.x,t.position.y),y.right.pressed&&t.position.x<o(400)?t.velocity.x=5:y.left.pressed&&t.position.x>o(100)?t.velocity.x=-5:(t.velocity.x=0,y.right.pressed&&c?(p.forEach(i=>i.position.x-=5),d.forEach(i=>i.position.x-=5)):y.left.pressed&&c&&(p.forEach(i=>i.position.x+=5),d.forEach(i=>i.position.x+=5))),p.forEach(i=>{if([t.position.y+t.height<=i.position.y,t.position.y+t.height+t.velocity.y>=i.position.y,t.position.x>=i.position.x-t.width/2,t.position.x<=i.position.x+i.width-t.width/3].every(Boolean)){t.velocity.y=0;return}[t.position.x>=i.position.x-t.width/2,t.position.x<=i.position.x+i.width-t.width/3,t.position.y+t.height>=i.position.y,t.position.y<=i.position.y+i.height].every(Boolean)&&(t.position.y=i.position.y+t.height,t.velocity.y=r)}),d.forEach((i,s,e)=>{[t.position.x>=i.position.x,t.position.y>=i.position.y,t.position.y+t.height<=i.position.y+i.height,c,t.position.x-t.width<=i.position.x-i.width+t.width*.9,s===0||e[s-1].claimed].every(Boolean)&&(i.claim(),s===e.length-1&&(c=!1,B("Your on ðŸ”¥!"),x("ArrowRight",0,!1)))})},y={right:{pressed:!1},left:{pressed:!1}},x=(i,s,e)=>{if(!c){t.velocity.x=0,t.velocity.y=0;return}switch(i){case"ArrowLeft":y.left.pressed=e,s===0&&(t.velocity.x=s),t.velocity.x-=s;break;case"ArrowUp":case" ":case"Spacebar":t.velocity.y-=8;break;case"ArrowRight":y.right.pressed=e,s===0&&(t.velocity.x=s),t.velocity.x+=s;break}},z=()=>{n.style.display="block",u.style.display="none",g()},B=i=>{f.style.display="block",m.textContent=i,c&&setTimeout(()=>f.style.display="none",2e3)};v.addEventListener("click",z);window.addEventListener("keydown",({key:i})=>{x(i,8,!0)});window.addEventListener("keyup",({key:i})=>{x(i,0,!1)});
