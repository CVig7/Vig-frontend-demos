import"./modulepreload-polyfill-B5Qt9EMX.js";const u=document.getElementById("initiate-game-button"),h=document.getElementById("game-canvas"),m=document.querySelector(".game-intro-screen"),f=document.querySelector(".checkpoint-message-screen"),v=document.querySelector(".checkpoint-message-screen > p"),n=h.getContext("2d");h.width=innerWidth;h.height=innerHeight;const w=.5;let c=!0;const o=i=>innerHeight<500?Math.ceil(i/500*innerHeight):i;class k{constructor(){this.position={x:o(10),y:o(400)},this.velocity={x:0,y:0},this.width=o(40),this.height=o(40),this.color="black"}draw(){n.fillStyle="black",n.fillRect(this.position.x,this.position.y,this.width,this.height)}update(){this.draw(),this.position.x+=this.velocity.x,this.position.y+=this.velocity.y,this.position.y+this.height+this.velocity.y<=h.height?(this.position.y<0&&(this.position.y=0,this.velocity.y=w),this.velocity.y+=w):this.velocity.y=0,this.position.x<this.width&&(this.position.x=this.width),this.position.x>=h.width-this.width*2&&(this.position.x=h.width-this.width*2)}}class C{constructor(s,e){this.position={x:s,y:e},this.width=o(40),this.height=o(40),this.color="red",this.speed=1}draw(){n.fillStyle=this.color,n.fillRect(this.position.x,this.position.y,this.width,this.height)}update(s,e){const y=s-this.position.x,x=e-this.position.y,a=Math.hypot(y,x);a>1&&(this.position.x+=y/a*this.speed,this.position.y+=x/a*this.speed),this.draw()}}class E{constructor(s,e){this.position={x:s,y:e},this.width=200,this.height=o(40),this.color=["blue","white","orange"],this.currentColorIndex=Math.floor(Math.random()*this.color.length),this.framrate=0}draw(){this.framrate++,this.framrate%10===0&&(this.currentColorIndex=(this.currentColorIndex+1)%this.color.length),n.fillStyle=this.color[this.currentColorIndex],n.fillRect(this.position.x,this.position.y,this.width,this.height,this.color)}}class b{constructor(s,e,y){this.position={x:s,y:e},this.width=o(40),this.height=o(70),this.claimed=!1}draw(){n.fillStyle="#f1be32",n.fillRect(this.position.x,this.position.y,this.width,this.height)}claim(){this.width=0,this.height=0,this.position.y=1/0,this.claimed=!0}}const t=new k,S=new C(1e3,o(300)),z=[{x:500,y:o(450)},{x:700,y:o(400)},{x:850,y:o(350)},{x:900,y:o(350)},{x:1050,y:o(150)},{x:2500,y:o(450)},{x:2900,y:o(400)},{x:3150,y:o(350)},{x:3900,y:o(450)},{x:4200,y:o(400)},{x:4400,y:o(200)},{x:4700,y:o(150)}],p=z.map(i=>new E(i.x,i.y)),I=[{x:1170,y:o(80),z:1},{x:2900,y:o(330),z:2},{x:4800,y:o(80),z:3}],r=I.map(i=>new b(i.x,i.y,i.z)),g=()=>{requestAnimationFrame(g),n.clearRect(0,0,h.width,h.height),p.forEach(i=>i.draw()),r.forEach(i=>i.draw()),t.update(),S.update(t.position.x,t.position.y),l.right.pressed&&t.position.x<o(400)?t.velocity.x=5:l.left.pressed&&t.position.x>o(100)?t.velocity.x=-5:(t.velocity.x=0,l.right.pressed&&c?(p.forEach(i=>i.position.x-=5),r.forEach(i=>i.position.x-=5)):l.left.pressed&&c&&(p.forEach(i=>i.position.x+=5),r.forEach(i=>i.position.x+=5))),p.forEach(i=>{const s=t.position.y+t.velocity.y;t.velocity.y>=0;const e=t.position.x+t.width>i.position.x&&t.position.x<i.position.x+i.width&&t.position.y+t.height<=i.position.y&&s+t.height>=i.position.y;e&&(t.velocity.y=0,t.position.y=i.position.y-t.height),t.position.y+t.height>i.position.y&&t.position.y<i.position.y+i.height&&t.position.x+t.width>i.position.x&&t.position.x<i.position.x+i.width&&!e&&(t.position.x<i.position.x?t.position.x=i.position.x-t.width:t.position.x=i.position.x+i.width)}),r.forEach((i,s,e)=>{[t.position.x>=i.position.x,t.position.y>=i.position.y,t.position.y+t.height<=i.position.y+i.height,c,t.position.x-t.width<=i.position.x-i.width+t.width*.9,s===0||e[s-1].claimed].every(Boolean)&&(i.claim(),s===e.length-1&&(c=!1,H("Your on ðŸ”¥!"),d("ArrowRight",0,!1)))})},l={right:{pressed:!1},left:{pressed:!1}},d=(i,s,e)=>{if(!c){t.velocity.x=0,t.velocity.y=0;return}switch(i){case"ArrowLeft":l.left.pressed=e,s===0&&(t.velocity.x=s),t.velocity.x-=s;break;case"ArrowUp":case" ":case"Spacebar":t.velocity.y-=8;break;case"ArrowRight":l.right.pressed=e,s===0&&(t.velocity.x=s),t.velocity.x+=s;break}},A=()=>{h.style.display="block",m.style.display="none",g()},H=i=>{f.style.display="block",v.textContent=i,c&&setTimeout(()=>f.style.display="none",2e3)};u.addEventListener("click",A);window.addEventListener("keydown",({key:i})=>{d(i,8,!0)});window.addEventListener("keyup",({key:i})=>{d(i,0,!1)});
