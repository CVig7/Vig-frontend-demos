import"./styles-DT4rA1vP.js";const O=document.getElementById("initiate-game-button"),l=document.getElementById("game-canvas"),E=document.getElementById("bg-music"),R=document.querySelector(".game-intro-screen"),B=document.querySelector(".checkpoint-message-screen"),Y=document.querySelector(".checkpoint-message-screen > p"),q=document.querySelector(".checkpoint-message-screen > h2"),h=l.getContext("2d");let z=performance.now(),S=0,T=0;performance.now();let f=0;l.width=innerWidth;l.height=innerHeight;const b=.5;let d=!0;const o=e=>innerHeight<500?Math.ceil(e/500*innerHeight):e;class I{constructor(){this.position={x:o(0),y:o(325)},this.velocity={x:0,y:0},this.width=o(40),this.height=o(40),this.color="black",this.speed=1}draw(){h.fillStyle="black",h.fillRect(this.position.x,this.position.y,this.width,this.height)}update(){this.draw(),this.position.x+=this.velocity.x,this.position.y+=this.velocity.y,this.position.y+this.height+this.velocity.y<=l.height?(this.position.y<0&&(this.position.y=0,this.velocity.y=b),this.velocity.y+=b):this.velocity.y=0,this.position.x<this.width&&(this.position.x=this.width),this.position.x>=l.width-this.width*2&&(this.position.x=l.width-this.width*2)}}class J{constructor(n,y){this.position={x:n,y},this.velocity={x:0,y:0},this.width=o(40),this.height=o(40),this.color="red",this.speed=1,this.canJump=!1}draw(){h.fillStyle=this.color,h.fillRect(this.position.x,this.position.y,this.width,this.height)}update(n,y){const x=n-this.position.x,a=Math.abs(x);a>1?this.velocity.x=x/a*this.speed:this.velocity.x=0,this.velocity.y+=b,this.position.x+=this.velocity.x,this.position.y+=this.velocity.y,this.draw()}}class G{constructor(n,y){this.position={x:n,y},this.width=200,this.height=o(40),this.color=["blue","white","orange"],this.currentColorIndex=Math.floor(Math.random()*this.color.length),this.framrate=0}draw(){h.fillStyle="blue",h.fillRect(this.position.x,this.position.y,this.width,this.height)}}class W{constructor(n,y,x){this.position={x:n,y},this.width=o(40),this.height=o(70),this.claimed=!1}draw(){h.fillStyle="gold",h.fillRect(this.position.x,this.position.y,this.width,this.height)}claim(){this.width=0,this.height=0,this.position.y=1/0,this.claimed=!0}}const t=new I,s=new J(1400,l.height-o(40)),K=[{x:2500,y:o(450)},{x:2900,y:o(400)},{x:3150,y:o(350)},{x:3900,y:o(450)},{x:4200,y:o(400)},{x:4400,y:o(200)},{x:4700,y:o(150)},{x:5100,y:o(180)},{x:5500,y:o(260)},{x:5900,y:o(300)},{x:6300,y:o(340)},{x:6600,y:o(380)},{x:7e3,y:o(350)},{x:7400,y:o(300)},{x:7800,y:o(300)},{x:8100,y:o(280)},{x:8400,y:o(330)},{x:8700,y:o(360)},{x:9e3,y:o(400)},{x:9300,y:o(420)},{x:9600,y:o(300)},{x:9900,y:o(280)},{x:10200,y:o(260)},{x:10500,y:o(240)},{x:10800,y:o(300)}],m=K.map(e=>new G(e.x,e.y));let g=!0;const P=[{x:1170,y:o(80),z:1},{x:2900,y:o(330),z:2},{x:4700,y:o(80),z:3},{x:5500,y:o(190),z:4},{x:7e3,y:o(280),z:5},{x:7800,y:o(230),z:6},{x:8700,y:o(290),z:7},{x:9600,y:o(230),z:8},{x:10500,y:o(170),z:9}],r=P.map(e=>new W(e.x,e.y,e.z));document.body.classList.add("playing");const H=()=>{const e=performance.now(),n=e-z;S++,n>=1e3&&(T=S,S=0,z=e,console.log(`FPS: ${T}`)),requestAnimationFrame(H),h.clearRect(0,0,l.width,l.height);const y=o(40),x=50,a=800,u=600,M=50;h.fillStyle="blue";const L=-.002*Math.pow(x-400,2)+u;h.fillRect(0+f,L,M,y),h.beginPath();for(let i=x;i<=a;i++){const c=-.002*Math.pow(i-400,2)+u;i===x?h.moveTo(i+f,c):h.lineTo(i+f,c)}for(let i=a;i>=x;i--){const c=-.002*Math.pow(i-400,2)+u+y;h.lineTo(i+f,c)}h.closePath(),h.fillStyle="blue",h.fill(),m.forEach(i=>i.draw()),r.forEach(i=>i.draw()),t.update(),s.update(t.position.x,t.position.y),w.right.pressed&&t.position.x<o(400)?t.velocity.x=5:w.left.pressed&&t.position.x>o(100)?t.velocity.x=-5:(t.velocity.x=0,w.right.pressed&&d?(f-=5,m.forEach(i=>i.position.x-=5),r.forEach(i=>i.position.x-=5)):w.left.pressed&&d&&(f+=5,m.forEach(i=>i.position.x+=5),r.forEach(i=>i.position.x+=5)));const v=t.position.x+t.width/2;if(v>=x&&v<=a){const i=-.002*Math.pow(v-410,2)+u,c=i,p=i+y;t.position.y+t.height>=c&&t.position.y+t.height<=p&&(t.position.y=c-t.height,t.velocity.y=0,g=!0)}m.forEach(i=>{const c=t.position.y+t.velocity.y;t.velocity.y>=0;const p=t.position.x+t.width>i.position.x&&t.position.x<i.position.x+i.width&&t.position.y+t.height<=i.position.y&&c+t.height>=i.position.y;p?(t.velocity.y=0,t.position.y=i.position.y-t.height,g=!0):t.position.y+t.height===i.position.y&&t.position.x+t.width>i.position.x&&t.position.x<i.position.x+i.width&&(g=!0),t.position.y+t.height>i.position.y&&t.position.y<i.position.y+i.height&&t.position.x+t.width>i.position.x&&t.position.x<i.position.x+i.width&&!p&&(t.position.x<i.position.x?t.position.x=i.position.x-t.width:t.position.x=i.position.x+i.width),t.position.y>=i.position.y+i.height&&c<=i.position.y+i.height&&t.position.x+t.width>i.position.x&&t.position.x<i.position.x+i.width&&(t.velocity.y=1,t.position.y=i.position.y+i.height+1,g=!1)}),t.position.y+t.height>=l.height&&t.velocity.y===0&&(g=!0),s.position.y+s.height>=l.height&&(s.velocity.y=0,s.position.y=l.height-s.height,s.canJump=!0),m.forEach(i=>{const c=s.position.y+s.velocity.y,p=s.position.x+s.width>i.position.x&&s.position.x<i.position.x+i.width&&s.position.y+s.height<=i.position.y&&c+s.height>=i.position.y;p&&(s.velocity.y=0,s.position.y=i.position.y-s.height,s.canJump=!0),s.position.y+s.height>i.position.y&&s.position.y<i.position.y+i.height&&s.position.x+s.width>i.position.x&&s.position.x<i.position.x+i.width&&!p&&(s.position.x<i.position.x?s.position.x=i.position.x-s.width:s.position.x=i.position.x+i.width),s.position.y>=i.position.y+i.height&&c<=i.position.y+i.height&&s.position.x+s.width>i.position.x&&s.position.x<i.position.x+i.width&&(s.velocity.y=1,s.position.y=i.position.y+i.height+1)}),t.position.y+t.height<s.position.y&&s.canJump&&s.jump(),t.position.x<s.position.x+s.width&&t.position.x+t.width>s.position.x&&t.position.y<s.position.y+s.height&&t.position.y+t.height>s.position.y&&(A("You've been caught!","Game Over!"),d=!1,t.velocity.x=0,t.velocity.y=0),r.forEach((i,c,p)=>{[t.position.x>=i.position.x,t.position.y>=i.position.y,t.position.y+t.height<=i.position.y+i.height,d,t.position.x-t.width<=i.position.x-i.width+t.width*.9,c===0||p[c-1].claimed].every(Boolean)&&(i.claim(),c===p.length-1&&(d=!1,A("You have reached the last checkpoint!ðŸ”¥","BOOM-SHACKA-LAKA!"),k("ArrowRight",0,!1)))})},w={right:{pressed:!1},left:{pressed:!1}},k=(e,n,y)=>{if(!d){t.velocity.x=0,t.velocity.y=0;return}switch(e){case"ArrowLeft":w.left.pressed=y,n===0&&(t.velocity.x=n),t.velocity.x-=n;break;case"ArrowUp":case" ":case"Spacebar":(g||t.velocity.y===0)&&(t.velocity.y=-25);break;case"ArrowRight":w.right.pressed=y,n===0&&(t.velocity.x=n),t.velocity.x+=n;break}},X=()=>{l.style.display="block",R.style.display="none",E.volume=.5,E.play().catch(e=>{console.warn("Autoplay failed â€” user interaction might be required."),console.error(e)}),H()},A=(e,n="Checkpoint!")=>{B.style.display="block",q.textContent=n,Y.textContent=e,d&&setTimeout(()=>B.style.display="none",2e3)};O.addEventListener("click",X);window.addEventListener("keydown",({key:e})=>{k(e,8,!0)});window.addEventListener("keyup",({key:e})=>{k(e,0,!1)});
