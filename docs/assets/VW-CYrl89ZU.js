import"./modulepreload-polyfill-B5Qt9EMX.js";const m=document.getElementById("initiate-game-button"),h=document.getElementById("game-canvas"),v=document.querySelector(".game-intro-screen"),f=document.querySelector(".checkpoint-message-screen"),k=document.querySelector(".checkpoint-message-screen > p"),n=h.getContext("2d");h.width=innerWidth;h.height=innerHeight;const g=.5;let c=!0;const o=i=>innerHeight<500?Math.ceil(i/500*innerHeight):i;class E{constructor(){this.position={x:o(10),y:o(400)},this.velocity={x:0,y:0},this.width=o(40),this.height=o(40),this.color="black"}draw(){n.fillStyle="black",n.fillRect(this.position.x,this.position.y,this.width,this.height)}update(){this.draw(),this.position.x+=this.velocity.x,this.position.y+=this.velocity.y,this.position.y+this.height+this.velocity.y<=h.height?(this.position.y<0&&(this.position.y=0,this.velocity.y=g),this.velocity.y+=g):this.velocity.y=0,this.position.x<this.width&&(this.position.x=this.width),this.position.x>=h.width-this.width*2&&(this.position.x=h.width-this.width*2)}}class S{constructor(s,e){this.position={x:s,y:e},this.width=o(40),this.height=o(40),this.color="red",this.speed=1}draw(){n.fillStyle=this.color,n.fillRect(this.position.x,this.position.y,this.width,this.height)}update(s,e){const p=s-this.position.x,r=e-this.position.y,d=Math.hypot(p,r);d>1&&(this.position.x+=p/d*this.speed,this.position.y+=r/d*this.speed),this.draw()}}class C{constructor(s,e){this.position={x:s,y:e},this.width=200,this.height=o(40),this.color=["blue","white","orange"],this.currentColorIndex=Math.floor(Math.random()*this.color.length),this.framrate=0}draw(){n.fillStyle="blue",n.fillRect(this.position.x,this.position.y,this.width,this.height)}}class b{constructor(s,e,p){this.position={x:s,y:e},this.width=o(40),this.height=o(70),this.claimed=!1}draw(){n.fillStyle="gold",n.fillRect(this.position.x,this.position.y,this.width,this.height)}claim(){this.width=0,this.height=0,this.position.y=1/0,this.claimed=!0}}const t=new E,z=new S(1e3,o(300)),B=[{x:500,y:o(450)},{x:700,y:o(400)},{x:850,y:o(350)},{x:900,y:o(350)},{x:1050,y:o(150)},{x:2500,y:o(450)},{x:2900,y:o(400)},{x:3150,y:o(350)},{x:3900,y:o(450)},{x:4200,y:o(400)},{x:4400,y:o(200)},{x:4700,y:o(150)}],a=B.map(i=>new C(i.x,i.y));let y=!0;const A=[{x:1170,y:o(80),z:1},{x:2900,y:o(330),z:2},{x:4800,y:o(80),z:3}],x=A.map(i=>new b(i.x,i.y,i.z)),u=()=>{requestAnimationFrame(u),n.clearRect(0,0,h.width,h.height),a.forEach(i=>i.draw()),x.forEach(i=>i.draw()),t.update(),z.update(t.position.x,t.position.y),l.right.pressed&&t.position.x<o(400)?t.velocity.x=5:l.left.pressed&&t.position.x>o(100)?t.velocity.x=-5:(t.velocity.x=0,l.right.pressed&&c?(a.forEach(i=>i.position.x-=5),x.forEach(i=>i.position.x-=5)):l.left.pressed&&c&&(a.forEach(i=>i.position.x+=5),x.forEach(i=>i.position.x+=5))),a.forEach(i=>{const s=t.position.y+t.velocity.y;t.velocity.y>=0;const e=t.position.x+t.width>i.position.x&&t.position.x<i.position.x+i.width&&t.position.y+t.height<=i.position.y&&s+t.height>=i.position.y;e?(t.velocity.y=0,t.position.y=i.position.y-t.height,y=!0):t.position.y+t.height===i.position.y&&t.position.x+t.width>i.position.x&&t.position.x<i.position.x+i.width&&(y=!0),t.position.y+t.height>i.position.y&&t.position.y<i.position.y+i.height&&t.position.x+t.width>i.position.x&&t.position.x<i.position.x+i.width&&!e&&(t.position.x<i.position.x?t.position.x=i.position.x-t.width:t.position.x=i.position.x+i.width),t.position.y>=i.position.y+i.height&&s<=i.position.y+i.height&&t.position.x+t.width>i.position.x&&t.position.x<i.position.x+i.width&&(t.velocity.y=1,t.position.y=i.position.y+i.height+1,y=!1)}),t.position.y+t.height>=h.height&&t.velocity.y===0&&(y=!0),x.forEach((i,s,e)=>{[t.position.x>=i.position.x,t.position.y>=i.position.y,t.position.y+t.height<=i.position.y+i.height,c,t.position.x-t.width<=i.position.x-i.width+t.width*.9,s===0||e[s-1].claimed].every(Boolean)&&(i.claim(),s===e.length-1&&(c=!1,R("Your on ðŸ”¥!"),w("ArrowRight",0,!1)))})},l={right:{pressed:!1},left:{pressed:!1}},w=(i,s,e)=>{if(!c){t.velocity.x=0,t.velocity.y=0;return}switch(i){case"ArrowLeft":l.left.pressed=e,s===0&&(t.velocity.x=s),t.velocity.x-=s;break;case"ArrowUp":case" ":case"Spacebar":(y||t.velocity.y===0)&&(t.velocity.y=-8);break;case"ArrowRight":l.right.pressed=e,s===0&&(t.velocity.x=s),t.velocity.x+=s;break}},H=()=>{h.style.display="block",v.style.display="none",u()},R=i=>{f.style.display="block",k.textContent=i,c&&setTimeout(()=>f.style.display="none",2e3)};m.addEventListener("click",H);window.addEventListener("keydown",({key:i})=>{w(i,8,!0)});window.addEventListener("keyup",({key:i})=>{w(i,0,!1)});
