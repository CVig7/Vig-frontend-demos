import"./styles-BvF875nR.js";const B=document.getElementById("initiate-game-button"),n=document.getElementById("game-canvas"),H=document.querySelector(".game-intro-screen"),r=document.querySelector(".checkpoint-message-screen"),A=document.querySelector(".checkpoint-message-screen > p"),z=document.querySelector(".checkpoint-message-screen > h2"),y=n.getContext("2d");let k=performance.now(),a=0,C=0;performance.now();n.width=innerWidth;n.height=innerHeight;const m=.5;let d=!0;const s=e=>innerHeight<500?Math.ceil(e/500*innerHeight):e;class F{constructor(){this.position={x:s(10),y:s(400)},this.velocity={x:0,y:0},this.width=s(40),this.height=s(40),this.color="black"}draw(){y.fillStyle="black",y.fillRect(this.position.x,this.position.y,this.width,this.height)}update(){this.draw(),this.position.x+=this.velocity.x,this.position.y+=this.velocity.y,this.position.y+this.height+this.velocity.y<=n.height?(this.position.y<0&&(this.position.y=0,this.velocity.y=m),this.velocity.y+=m):this.velocity.y=0,this.position.x<this.width&&(this.position.x=this.width),this.position.x>=n.width-this.width*2&&(this.position.x=n.width-this.width*2)}}class L{constructor(h,p){this.position={x:h,y:p},this.velocity={x:0,y:0},this.width=s(40),this.height=s(40),this.color="red",this.speed=1}draw(){y.fillStyle=this.color,y.fillRect(this.position.x,this.position.y,this.width,this.height)}update(h,p){const i=h-this.position.x,c=Math.abs(i);c>1?this.velocity.x=i/c*this.speed:this.velocity.x=0,this.velocity.y+=m,this.position.x+=this.velocity.x,this.position.y+=this.velocity.y,this.draw()}}class T{constructor(h,p){this.position={x:h,y:p},this.width=200,this.height=s(40),this.color=["blue","white","orange"],this.currentColorIndex=Math.floor(Math.random()*this.color.length),this.framrate=0}draw(){y.fillStyle="blue",y.fillRect(this.position.x,this.position.y,this.width,this.height)}}class R{constructor(h,p,i){this.position={x:h,y:p},this.width=s(40),this.height=s(70),this.claimed=!1}draw(){y.fillStyle="gold",y.fillRect(this.position.x,this.position.y,this.width,this.height)}claim(){this.width=0,this.height=0,this.position.y=1/0,this.claimed=!0}}const t=new F,o=new L(1400,n.height-s(40)),M=[{x:500,y:s(450)},{x:700,y:s(400)},{x:850,y:s(350)},{x:900,y:s(350)},{x:1050,y:s(150)},{x:2500,y:s(450)},{x:2900,y:s(400)},{x:3150,y:s(350)},{x:3900,y:s(450)},{x:4200,y:s(400)},{x:4400,y:s(200)},{x:4700,y:s(150)}],g=M.map(e=>new T(e.x,e.y));let w=!0;const O=[{x:1170,y:s(80),z:1},{x:2900,y:s(330),z:2},{x:4800,y:s(80),z:3}],f=O.map(e=>new R(e.x,e.y,e.z)),S=()=>{const e=performance.now(),h=e-k;a++,h>=1e3&&(C=a,a=0,k=e,console.log(`FPS: ${C}`)),requestAnimationFrame(S),y.clearRect(0,0,n.width,n.height),g.forEach(i=>i.draw()),f.forEach(i=>i.draw()),t.update(),o.update(t.position.x,t.position.y),x.right.pressed&&t.position.x<s(400)?t.velocity.x=5:x.left.pressed&&t.position.x>s(100)?t.velocity.x=-5:(t.velocity.x=0,x.right.pressed&&d?(g.forEach(i=>i.position.x-=5),f.forEach(i=>i.position.x-=5)):x.left.pressed&&d&&(g.forEach(i=>i.position.x+=5),f.forEach(i=>i.position.x+=5))),g.forEach(i=>{const c=t.position.y+t.velocity.y;t.velocity.y>=0;const l=t.position.x+t.width>i.position.x&&t.position.x<i.position.x+i.width&&t.position.y+t.height<=i.position.y&&c+t.height>=i.position.y;l?(t.velocity.y=0,t.position.y=i.position.y-t.height,w=!0):t.position.y+t.height===i.position.y&&t.position.x+t.width>i.position.x&&t.position.x<i.position.x+i.width&&(w=!0),t.position.y+t.height>i.position.y&&t.position.y<i.position.y+i.height&&t.position.x+t.width>i.position.x&&t.position.x<i.position.x+i.width&&!l&&(t.position.x<i.position.x?t.position.x=i.position.x-t.width:t.position.x=i.position.x+i.width),t.position.y>=i.position.y+i.height&&c<=i.position.y+i.height&&t.position.x+t.width>i.position.x&&t.position.x<i.position.x+i.width&&(t.velocity.y=1,t.position.y=i.position.y+i.height+1,w=!1)}),t.position.y+t.height>=n.height&&t.velocity.y===0&&(w=!0),o.position.y+o.height>=n.height&&(o.velocity.y=0,o.position.y=n.height-o.height),g.forEach(i=>{const c=o.position.y+o.velocity.y,l=o.position.x+o.width>i.position.x&&o.position.x<i.position.x+i.width&&o.position.y+o.height<=i.position.y&&c+o.height>=i.position.y;l&&(o.velocity.y=0,o.position.y=i.position.y-o.height),o.position.y+o.height>i.position.y&&o.position.y<i.position.y+i.height&&o.position.x+o.width>i.position.x&&o.position.x<i.position.x+i.width&&!l&&(o.position.x<i.position.x?o.position.x=i.position.x-o.width:o.position.x=i.position.x+i.width),o.position.y>=i.position.y+i.height&&c<=i.position.y+i.height&&o.position.x+o.width>i.position.x&&o.position.x<i.position.x+i.width&&(o.velocity.y=1,o.position.y=i.position.y+i.height+1)}),t.position.x<o.position.x+o.width&&t.position.x+t.width>o.position.x&&t.position.y<o.position.y+o.height&&t.position.y+t.height>o.position.y&&(E("You've been caught!","Game Over!"),d=!1,t.velocity.x=0,t.velocity.y=0),f.forEach((i,c,l)=>{[t.position.x>=i.position.x,t.position.y>=i.position.y,t.position.y+t.height<=i.position.y+i.height,d,t.position.x-t.width<=i.position.x-i.width+t.width*.9,c===0||l[c-1].claimed].every(Boolean)&&(i.claim(),c===l.length-1&&(d=!1,E("You have reached the last checkpoint!ðŸ”¥","BOOM-SHACKA-LAKA!"),u("ArrowRight",0,!1)))})},x={right:{pressed:!1},left:{pressed:!1}},u=(e,h,p)=>{if(!d){t.velocity.x=0,t.velocity.y=0;return}switch(e){case"ArrowLeft":x.left.pressed=p,h===0&&(t.velocity.x=h),t.velocity.x-=h;break;case"ArrowUp":case" ":case"Spacebar":(w||t.velocity.y===0)&&(t.velocity.y=-8);break;case"ArrowRight":x.right.pressed=p,h===0&&(t.velocity.x=h),t.velocity.x+=h;break}},q=()=>{n.style.display="block",H.style.display="none",S()},E=(e,h="Checkpoint!")=>{r.style.display="block",z.textContent=h,A.textContent=e,d&&setTimeout(()=>r.style.display="none",2e3)};B.addEventListener("click",q);window.addEventListener("keydown",({key:e})=>{u(e,8,!0)});window.addEventListener("keyup",({key:e})=>{u(e,0,!1)});
